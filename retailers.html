<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <title>Retailers & Offers - Cashtraq</title>
</head>
<body>
  <div class="page-wrapper">
    <!-- ðŸŒ™ Dark Mode Toggle -->
    <button id="darkModeToggle" class="btn secondary" style="position: absolute; top: 1rem; right: 1rem;">ðŸŒ“</button>

    <div class="container retailers">
      <!-- âœ… Logo -->
      <div class="logo-container centered">
        <img src="assets/cashtraq_logo.svg" alt="Cashtraq Logo" class="logo-img" />
      </div>

      <!-- âœ… Navigation Tabs -->
      <div class="nav-tabs">
        <a href="dashboard.html" class="btn secondary">Dashboard</a>
        <a href="retailers.html" class="btn secondary active">Retailers</a>
        <a href="profile.html" class="btn secondary">Profile</a>
      </div>

      <!-- âœ… Heading -->
      <h2 class="section-heading">Retailers & Offers</h2>

      <!-- âœ… Search Bar -->
      <input type="text" placeholder="Search retailers..." class="input-field search-retailers" id="searchRetailers" />

      <!-- âœ… Retailer Cards -->
      <div class="retailer-list" id="retailersList">
        <div class="retailer-card">
          <img src="assets/asda.png" alt="Asda Logo" class="retailer-logo" />
          <div class="retailer-details">
            <strong>Asda</strong>
            <span>Cashback: 5.0%</span>
          </div>
          <div class="retailer-actions">
            <button class="icon-button favourite-btn">â™¡</button>
            <button class="icon-button add-btn">ï¼‹</button>
          </div>
        </div>

        <div class="retailer-card">
          <img src="assets/tesco.png" alt="Tesco Logo" class="retailer-logo" />
          <div class="retailer-details">
            <strong>Tesco</strong>
            <span>Cashback: 3.5%</span>
          </div>
          <div class="retailer-actions">
            <button class="icon-button favourite-btn">â™¡</button>
            <button class="icon-button add-btn">ï¼‹</button>
          </div>
        </div>

        <div class="retailer-card">
          <img src="assets/ocado.png" alt="Ocado Logo" class="retailer-logo" />
          <div class="retailer-details">
            <strong>Ocado</strong>
            <span>Cashback: 2.0%</span>
          </div>
          <div class="retailer-actions">
            <button class="icon-button favourite-btn">â™¡</button>
            <button class="icon-button add-btn">ï¼‹</button>
          </div>
        </div>
      </div>
    </div>

    <!-- âœ… Footer -->
    <footer>
      <a href="privacy.html">Privacy Policy</a> |
      <a href="terms.html">Terms & Conditions</a> |
      <a href="faq.html">Help / FAQ</a>
    </footer>

    <!-- âœ… Cookie Consent -->
    <div id="cookieConsent" style="position: fixed; bottom: 1rem; left: 1rem; right: 1rem; background: #008080; color: white; padding: 1rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; z-index: 1000;">
      <span>We use cookies to improve your experience. By using our site, you accept our 
        <a href="privacy.html" style="color: #d1eaea; text-decoration: underline;">Privacy Policy</a>.
      </span>
      <button id="acceptCookies" style="background: #004d40; border: none; color: white; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer;">Accept</button>
    </div>

    <!-- âœ… Floating Chatbot -->
    <div id="chatbot">
      <button id="chatbotToggle" aria-label="Open Chatbot">
        <img src="assets/chatbot-icon.svg" alt="Chatbot Icon" />
      </button>
      <div id="chatbox" style="display:none;">
        <h4>Cashtraq Help Assistant</h4>
        <!-- FAQ content goes here -->
      </div>
    </div>
  </div>

  <!-- âœ… Scripts -->
  <script>
    // ðŸŒ™ Dark Mode
    const toggleBtn = document.getElementById('darkModeToggle');
    toggleBtn.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    });
    if(localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
    }

    // âœ… Favourites toggle
    document.querySelectorAll('.favourite-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        btn.textContent = btn.classList.contains('active') ? 'â˜…' : 'â™¡';
      });
    });

    // âœ… Search filter
    const searchInput = document.getElementById('searchRetailers');
    const retailersList = document.getElementById('retailersList');
    searchInput.addEventListener('input', () => {
      const filter = searchInput.value.toLowerCase();
      const cards = retailersList.getElementsByClassName('retailer-card');
      Array.from(cards).forEach(card => {
        const name = card.querySelector('strong').textContent.toLowerCase();
        card.style.display = name.includes(filter) ? '' : 'none';
      });
    });

    // âœ… Cookie Consent
    document.addEventListener("DOMContentLoaded", () => {
      const cookieConsent = document.getElementById('cookieConsent');
      const acceptBtn = document.getElementById('acceptCookies');

      if (localStorage.getItem('cookiesAccepted') === 'true') {
        cookieConsent.style.display = 'none';
      }

      acceptBtn.addEventListener('click', () => {
        localStorage.setItem('cookiesAccepted', 'true');
        cookieConsent.style.display = 'none';
      });
    });

    // âœ… Chatbot
    document.getElementById('chatbotToggle').addEventListener('click', () => {
      const chatbox = document.getElementById('chatbox');
      chatbox.style.display = chatbox.style.display === 'flex' ? 'none' : 'flex';
    });
  </script>
</body>
</html>
